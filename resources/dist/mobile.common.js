(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./src/mobile.init/fakeToolbar.js":function(e,t,n){var i=n("./src/mobile.startup/icons.js");e.exports=function(){var e,t;return e=i.cancel(null,{tagName:"a"}).$el.attr("tabindex","0").attr("role","button"),t=i.spinner({tagName:"span",hasText:!0,additionalClassNames:"",label:mw.msg("mobile-frontend-editor-loading")}).$el,$("<div>").addClass("ve-mobile-fakeToolbar-container").append($("<div>").addClass("ve-mobile-fakeToolbar-header").addClass("header").append($("<div>").addClass("ve-mobile-fakeToolbar").append(e,t)))}},"./src/mobile.startup/Anchor.js":function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n("./src/mobile.startup/View.js"),d=n("./src/mobile.startup/util.js"),p=function(e){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,i,l=o(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"isTemplateMode",get:function(){return!0}},{key:"defaults",get:function(){return{progressive:void 0,destructive:void 0,additionalClassNames:"",href:void 0,label:void 0}}},{key:"template",get:function(){return d.template('\n<a {{#href}}href="{{href}}"{{/href}} class="mw-ui-anchor\n\t{{#progressive}} mw-ui-progressive{{/progressive}}\n\t{{#destructive}} mw-ui-destructive{{/destructive}}\n\t {{additionalClassNames}}">{{label}}</a>\n\t')}}])&&s(t.prototype,n),i&&s(t,i),c}(u);e.exports=p},"./src/mobile.startup/Browser.js":function(e,t,n){var i,r=n("./src/mobile.startup/util.js");function s(e){var t=function t(){var n=this["__cache"+t.cacheId]||(this["__cache"+t.cacheId]={}),i=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e.apply(this,arguments)};return t.cacheId=Date.now().toString()+Math.random().toString(),t}function a(e,t){this.userAgent=e,this.$el=t}a.prototype={isIos:s((function(e){var t=this.userAgent,n=/ipad|iphone|ipod/i.test(t);if(!n||!e)return n;switch(e){case 8:return/OS 8_/.test(t)||/Version\/8/.test(t);case 4:return/OS 4_/.test(t);case 5:return/OS 5_/.test(t);default:return!1}})),isWideScreen:s((function(){var e=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=e})),supportsTouchEvents:s((function(){return"ontouchstart"in window})),supportsGeoLocation:s((function(){return"geolocation"in window.navigator}))},a.getSingleton=function(){var e;return i||(e=r.getDocument(),i=new a(window.navigator.userAgent,e)),i},e.exports=a},"./src/mobile.startup/Button.js":function(e,t,n){var i=n("./src/mobile.startup/mfExtend.js"),r=n("./src/mobile.startup/util.js"),s=n("./src/mobile.startup/View.js");function a(e){e.href&&(e.tagName="a"),s.call(this,e)}i(a,s,{isTemplateMode:!0,defaults:{tagName:"a",disabled:!1,block:void 0,progressive:void 0,destructive:void 0,quiet:void 0,additionalClassNames:"",href:void 0,label:void 0},template:r.template('<{{tagName}} {{#disabled}}disabled{{/disabled}}\n{{#href}}href="{{href}}"{{/href}}\nclass="mw-ui-button {{#progressive}}mw-ui-progressive{{/progressive}}\n\t{{#block}}mw-ui-block{{/block}}\n\t{{#quiet}}mw-ui-quiet{{/quiet}}\n\t{{#destructive}}mw-ui-destructive{{/destructive}} {{additionalClassNames}}\n">{{label}}</{{tagName}}>')}),e.exports=a},"./src/mobile.startup/CtaDrawer.js":function(e,t,n){var i=n("./src/mobile.startup/Drawer.js"),r=n("./src/mobile.startup/util.js"),s=n("./src/mobile.startup/Button.js"),a=n("./src/mobile.startup/Anchor.js");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l(e.queryParams,e.returnTo);return new i(r.extend({children:[r.parseHTML("<p>").text(e.content),new s(r.extend({progressive:!0,href:mw.util.getUrl("Special:UserLogin",t),label:mw.msg("mobile-frontend-watchlist-cta-button-login")},e.progressiveButton)).$el,r.parseHTML("<div>").addClass("cta-drawer__anchors").append(new a(r.extend({href:mw.util.getUrl("Special:UserLogin",c(t,e.signupQueryParams)),progressive:!0,label:mw.msg("mobile-frontend-watchlist-cta-button-signup")},e.actionAnchor)).$el)]},e))}function l(e,t){return r.extend({returnto:t||mw.config.get("wgPageName")},e)}function c(){return[].push.call(arguments,{type:"signup"}),r.extend.apply(r,arguments)}o.prototype.test={redirectParams:l,signUpParams:c},e.exports=o},"./src/mobile.startup/Drawer.js":function(e,t,n){var i=n("./src/mobile.startup/mfExtend.js"),r=n("./src/mobile.startup/View.js"),s=n("./src/mobile.startup/util.js"),a=n("./src/mobile.startup/Icon.js");function o(e){this.drawerClassName=e.className||"",this.collapseIcon=new a({name:"expand",additionalClassNames:"cancel"}),r.call(this,s.extend({onBeforeHide:function(){},showCollapseIcon:!0},e,{className:"drawer-container"},{events:s.extend({"click .drawer-container__mask":function(){this.hide()}.bind(this),"click .cancel":function(e){e.preventDefault(),this.hide()}.bind(this),click:function(e){e.stopPropagation()}},e.events)}))}i(o,r,{minHideDelay:100,show:function(){var e=s.Deferred();return this.$el.find(".drawer-container__mask").addClass("drawer-container__mask--visible"),this.$el.find(".drawer").hasClass("visible")?e.resolve():setTimeout(function(){this.$el.find(".drawer").addClass("visible"),this.options.onShow&&this.options.onShow(e),setTimeout((function(){e.resolve()}),this.minHideDelay)}.bind(this),this.minHideDelay),e.promise()},hide:function(){this.$el.find(".drawer-container__mask").removeClass("drawer-container__mask--visible"),this.$el.find(".drawer").removeClass("visible"),setTimeout(function(){this.$el.find(".drawer").removeClass("visible"),this.options.onBeforeHide(this)}.bind(this),this.minHideDelay)},postRender:function(){var e=this.options,t=s.parseHTML("<div>").addClass("drawer-container__mask"),n=s.parseHTML("<div>").addClass("drawer drawer-container__drawer position-fixed ".concat(this.drawerClassName).trim());e.showCollapseIcon&&n.prepend(this.collapseIcon.$el),e.children&&n.append(e.children),this.$el.append(t),this.$el.append(n)}}),e.exports=o},"./src/mobile.startup/Icon.js":function(e,t,n){var i=n("./src/mobile.startup/mfExtend.js"),r=n("./src/mobile.startup/util.js"),s=n("./src/mobile.startup/View.js");function a(e){e.hasText&&(e.modifier="mw-ui-icon-before ".concat(e.modifier||"")),e.href&&(e.tagName="a"),"button"===e.tagName&&(e.isTypeButton=!0),s.call(this,e)}i(a,s,{preRender:function(){this.setRotationClass()},setRotationClass:function(){var e=this.options;if(e.rotation)switch(e.rotation){case-180:case 180:e._rotationClass="mf-mw-ui-icon-rotate-flip";break;case-90:e._rotationClass="mf-mw-ui-icon-rotate-anti-clockwise";break;case 90:e._rotationClass="mf-mw-ui-icon-rotate-clockwise";break;case 0:break;default:throw new Error("Bad value for rotation given. Must be ±90, 0 or ±180.")}},isTemplateMode:!0,defaults:{rotation:0,hasText:!1,href:void 0,glyphPrefix:"mf",tagName:"div",disabled:!1,isSmall:!1,base:"mw-ui-icon",name:"",modifier:"mw-ui-icon-element",title:""},getClassName:function(){return this.$el.attr("class")},getGlyphClassName:function(){return this.options.base+"-"+this.options.glyphPrefix+"-"+this.options.name},template:r.template('<{{tagName}} {{#disabled}}disabled{{/disabled}} {{#isTypeButton}}type="button"{{/isTypeButton}} class="{{base}} {{base}}-{{glyphPrefix}}-{{name}} {{modifier}} {{#isSmall}}mw-ui-icon-small{{/isSmall}} {{#_rotationClass}}{{_rotationClass}}{{/_rotationClass}} {{additionalClassNames}}" {{#id}}id="{{id}}"{{/id}} {{#href}}href="{{href}}"{{/href}} {{#title}}title="{{title}}"{{/title}}>{{#hasText}}<span>{{/hasText}}{{label}}{{#hasText}}</span>{{/hasText}}</{{tagName}}>')}),e.exports=a},"./src/mobile.startup/MessageBox.js":function(e,t,n){var i=n("./src/mobile.startup/View.js"),r=n("./src/mobile.startup/util.js");function s(){i.apply(this,arguments)}n("./src/mobile.startup/mfExtend.js")(s,i,{isTemplateMode:!0,defaults:{},template:r.template('\n<div class="{{className}}">\n\t{{#heading}}<h2>{{heading}}</h2>{{/heading}}\n\t{{{msg}}}\n</div>\n\t')}),e.exports=s},"./src/mobile.startup/Overlay.js":function(e,t,n){var i=n("./src/mobile.startup/View.js"),r=n("./src/mobile.startup/headers.js").header,s=n("./src/mobile.startup/Anchor.js"),a=n("./src/mobile.startup/util.js"),o=n("./src/mobile.startup/Browser.js").getSingleton();function l(e){this.isIos=o.isIos(),i.call(this,a.extend(!0,{headerChrome:!1,className:"overlay"},e,{events:a.extend({"click .cancel, .confirm, .initial-header .back":"onExitClick",click:function(e){e.stopPropagation()}},e.events)}))}n("./src/mobile.startup/mfExtend.js")(l,i,{template:a.template('\n{{^noHeader}}\n<div class="overlay-header-container header-container{{#headerChrome}}\n\theader-chrome{{/headerChrome}} position-fixed">\n</div>\n{{/noHeader}}\n<div class="overlay-content">\n\t{{>content}}\n</div>\n<div class="overlay-footer-container position-fixed"></div>\n\t'),hideTimeout:null,showSpinner:function(){this.$el.find(".spinner").removeClass("hidden")},hideSpinner:function(){this.$el.find(".spinner").addClass("hidden")},postRender:function(){var e=this.options.footerAnchor;this.$overlayContent=this.$el.find(".overlay-content"),this.isIos&&this.$el.addClass("overlay-ios"),e&&this.$el.find(".overlay-footer-container").append(new s(e).$el);var t=this.options.headers||[r(this.options.heading,this.options.headerActions)];this.$el.find(".overlay-header-container").append(t)},onExitClick:function(e){var t=function(){this.hide()}.bind(this);e.preventDefault(),e.stopPropagation(),this.options.onBeforeExit?this.options.onBeforeExit(t,(function(){})):t()},show:function(){var e=a.getDocument();this.scrollTop=window.pageYOffset,e.addClass("overlay-enabled"),window.scrollTo(0,1),this.$el.addClass("visible"),null!==this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)},hide:function(){return a.getDocument().removeClass("overlay-enabled"),window.scrollTo(window.pageXOffset,this.scrollTop),this.hideTimeout=setTimeout(function(){this.$el.detach(),this.hideTimeout=null}.bind(this),0),this.emit("hide"),!0},showHidden:function(e){this.$el.find(".hideable").addClass("hidden"),this.$el.find(e).removeClass("hidden")}}),l.make=function(e,t){var n=new l(e);return n.$el.find(".overlay-content").append(t.$el),n},e.exports=l},"./src/mobile.startup/OverlayManager.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=null,s="MobileFrontend OverlayManager was here!";function a(e,t){e.on("route",this._checkRoute.bind(this)),this.router=e,this.entries={},this.stack=[],this.hideCurrent=!0,this.container=t}function o(e){e.on("hide",(function(){e.emit("_om_hide")}))}a.prototype={_onHideOverlayOutsideOverlayManager:function(){if(this.stack.length){var e=this.stack[0].route,t="string"==typeof e,n=this.router.getPath(),i=t&&n===e||n.match(e);this.hideCurrent=!1,i&&this.router.back()}},_attachOverlay:function(e){e.$el.parents().length||this.container.appendChild(e.$el[0])},_show:function(e){window.history.replaceState(s,null,window.location.href),e.once("_om_hide",this._onHideOverlayOutsideOverlayManager.bind(this)),this._attachOverlay(e),e.show()},_hideOverlay:function(e,t){var n;function i(){n=!0,e.hide()}return e.off("_om_hide"),e.options&&e.options.onBeforeExit?e.options.onBeforeExit(i,t):i(),n||e.once("_om_hide",this._onHideOverlayOutsideOverlayManager.bind(this)),n},_processMatch:function(e){var t;e&&(e.overlay?this._show(e.overlay):(t=e.factoryResult)&&(e.overlay=t,o(e.overlay),this._show(t)))},_checkRoute:function(e){var t=this.stack[0];if(t||(this.scrollTop=window.pageYOffset),!t||void 0===t.overlay||!this.hideCurrent||this._hideOverlay(t.overlay,(function(){e.preventDefault()}))){var n=Object.keys(this.entries).reduce(function(t,n){return t||this._matchRoute(e.path,this.entries[n])}.bind(this),null);n||(this.stack=[],window.scrollTo(window.pageXOffset,this.scrollTop)),this.hideCurrent=!0,this._processMatch(n)}},_matchRoute:function(e,t){var n,i,r,s,a=this.stack[1],o=this;return"string"==typeof t.route?(i=t.route===e,r=[]):(s=e.match(t.route),r=(i=!!s)?s.slice(1):[]),i?a&&a.path===e?(o.stack.shift(),a):(n={path:e,route:t.route,factoryResult:t.factory.apply(o,r)},this.stack[0]&&n.path===this.stack[0].path?o.stack[0]=n:o.stack.unshift(n),n):null},add:function(e,t){var n=this,r={route:e,factory:t};this.entries[e]=r,i.docReady((function(){n._processMatch(n._matchRoute(n.router.getPath(),r))}))},replaceCurrent:function(e){if(0===this.stack.length)throw new Error("Trying to replace OverlayManager's current overlay, but stack is empty");var t=this.stack[0].overlay;t&&this._hideOverlay(t),this.stack[0].overlay=e,o(e),this._show(e)}},a.getSingleton=function(){if(!r){var e=mw.loader.require("mediawiki.router"),t=document.createElement("div"),n=e.getPath(),i=window.history.state;t.className="mw-overlays-container",document.body.appendChild(t),n&&i!==s&&(window.history.replaceState(null,null,"#"),window.history.pushState(s,null,"#".concat(n))),r=new a(e,t)}return r},a.test={MANAGED_STATE:s,__clearCache:function(){r=null}},e.exports=a},"./src/mobile.startup/Page.js":function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=mw.html,s=n("./src/mobile.startup/util.js"),a=n("./src/mobile.startup/Section.js"),o=function(){"use strict";function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.title||"";s.extend(this,{id:t.id||0,title:n,relevantTitle:t.relevantTitle||n,titleObj:t.titleObj,displayTitle:t.displayTitle||r.escape(n),namespaceNumber:t.namespaceNumber||0,protection:t.protection,sections:[],url:t.url||mw.util.getUrl(n),wikidataDescription:t.wikidataDescription,_isMainPage:t.isMainPage||!1,isMissing:void 0!==t.isMissing?t.isMissing:0===t.id,lastModified:t.lastModified,anchor:t.anchor,revId:t.revId,_isWatched:t.isWatched,thumbnail:!!Object.prototype.hasOwnProperty.call(t,"thumbnail")&&t.thumbnail,_sectionLookup:{}}),(t.sections||[]).forEach(function(e){var t=new a(e);this.sections.push(t),this._sectionLookup[t.id]=t}.bind(this)),this.thumbnail&&this.thumbnail.width&&(this.thumbnail.isLandscape=this.thumbnail.width>this.thumbnail.height)}var t,n,o;return t=e,(n=[{key:"getDisplayTitle",value:function(){return this.displayTitle}},{key:"inNamespace",value:function(e){return this.namespaceNumber===mw.config.get("wgNamespaceIds")[e]}},{key:"isWikiText",value:function(){return"wikitext"===mw.config.get("wgPageContentModel")}},{key:"isMainPage",value:function(){return this._isMainPage}},{key:"isWatched",value:function(){return this._isWatched}},{key:"getRevisionId",value:function(){return this.revId}},{key:"getTitle",value:function(){return this.title}},{key:"getNamespaceId",value:function(){var e=this.title.split(":");return e[1]&&mw.config.get("wgNamespaceIds")[e[0].toLowerCase().replace(" ","_")]||0}},{key:"getSection",value:function(e){return this._sectionLookup[e]}},{key:"getSections",value:function(){return this.sections}}])&&i(t.prototype,n),o&&i(t,o),e}();e.exports=o},"./src/mobile.startup/PageGateway.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/Section.js").prototype.template,s=n("./src/mobile.startup/actionParams.js"),a={};function o(e){var t,n=e.map((function(e){return e.level})).filter((function(e){return!!e})),i=Math.min.apply(this,n).toString(),s=[];return e.forEach((function(e){e.subsections=[],!t||!e.level||e.level===i||t.subsections.length&&t.subsections[0].level>e.level||t.level&&t.level>=e.level?(s.push(e),t=e):(!function e(t,n){var i;0===t.length?t.push(n):(i=t[t.length-1],parseInt(i.level,10)===parseInt(n.level,10)?t.push(n):e(i.subsections,n))}(t.subsections,e),t.text+=r.render(e))})),s}function l(e){this.api=e}l.prototype={invalidatePage:function(e){delete a[e]},_getLanguageVariantsFromApiResponse:function(e,t){var n=t.query.general,i=n.variantarticlepath,r=[];return!!n.variants&&(Object.keys(n.variants).forEach((function(t){var s=n.variants[t],a={autonym:s.name,lang:s.code};a.url=i?i.replace("$1",e).replace("$2",s.code):mw.util.getUrl(e,{variant:s.code}),r.push(a)})),r)},getPageLanguages:function(e,t){var n=this,r=s({meta:"siteinfo",siprop:"general",prop:"langlinks",lllimit:"max",titles:e});return t?(r.llprop="url|autonym|langname",r.llinlanguagecode=t):r.llprop="url|autonym",this.api.get(r).then((function(t){return{languages:t.query.pages[0].langlinks||[],variants:n._getLanguageVariantsFromApiResponse(e,t)}}),(function(){return i.Deferred().reject()}))},_getAPIResponseFromHTML:function(e){var t=e.find("h1,h2,h3,h4,h5,h6"),n=[];return t.each((function(){var t=this.tagName.substr(1),i=e.find(this).find(".mw-headline");i.length&&n.push({level:t,line:i.html(),anchor:i.attr("id")||"",text:""})})),n},getSectionsFromHTML:function(e){return o(this._getAPIResponseFromHTML(e))}},e.exports=l},"./src/mobile.startup/PageHTMLParser.js":function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n("./src/mobile.startup/Thumbnail.js"),s=mw.config.get("wgMFMobileFormatterHeadings",["h1","h2","h3","h4","h5"]).join(","),a=["noviewer","metadata"],o=function(){"use strict";function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=t,this.$headings=this.$el.find(s)}var t,n,o;return t=e,(n=[{key:"findSectionHeadingByIndex",value:function(e){return e<1?$([]):this.$headings.filter('.mw-parser-output > *, [class^="mf-section-"] > *').eq(e-1)}},{key:"findChildInSectionLead",value:function(e,t){var n,i,r,a,o=s;function l(e){return e.find(t).addBack()}return 0===e?(a=this.getLeadSectionElement())&&a.length?l(a.children(t)):(n=this.findSectionHeadingByIndex(1)).length?l(n.prevAll(t)):this.$el.find(t):(n=this.findSectionHeadingByIndex(e)).hasClass("section-heading")?(i=(r=n.next()).find(o).eq(0)).length?l(i.prevAll(t)):l(r.children(t)):(i=n.eq(0).nextAll(o).eq(0),n.nextUntil(i,t))}},{key:"getLeadSectionElement",value:function(){var e=this.$el.find(".mf-section-0");return e.length?e:null}},{key:"getThumbnails",value:function(e){var t="."+a.join(",."),n=[];return(e=e||this.$el).find("a.image, a.thumbimage").not(t).each((function(){var i=e.find(this),s=i.find(".lazy-image-placeholder"),o=0===i.parents(t).length&&0===i.find(t).length,l=i.attr("href"),c=l&&l.match(/title=([^/&]+)/),u=l&&l.match(/[^/]+$/);s.length&&o&&(o=!new RegExp("\\b("+a.join("|")+")\\b").test(s.data("class"))),o&&(c||u)&&n.push(new r({el:i,filename:decodeURIComponent(c?c[1]:u[0])}))})),n}},{key:"getRedLinks",value:function(){return this.$el.find(".new")}}])&&i(t.prototype,n),o&&i(t,o),e}();o.HEADING_SELECTOR=s,e.exports=o},"./src/mobile.startup/PageList.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/mfExtend.js"),s=n("./src/mobile.startup/View.js"),a=n("./src/mobile.startup/Browser.js").getSingleton();function o(){s.apply(this,arguments)}r(o,s,{defaults:{pages:[]},renderPageImages:function(){var e=this;setTimeout((function(){e.$el.find(".list-thumb").each((function(){var t=e.$el.find(this).data("style");e.$el.find(this).attr("style",t)}))}),a.isWideScreen()?0:1e3)},postRender:function(){this.renderPageImages()},template:i.template('\n<ul class="page-list thumbs actionable">\n\t{{#pages}}\n\t\t{{>item}}\n\t{{/pages}}\n</ul>\n\t'),templatePartials:{item:i.template('\n<li title="{{title}}" data-id="{{id}}" class="page-summary">\n  <a href="{{url}}" class="title {{#isMissing}}new{{/isMissing}}"\n    {{#anchor}}name="{{anchor}}"{{/anchor}}\n    {{#latitude}}data-latlng="{{latitude}},{{longitude}}"{{/latitude}}\n    data-title="{{title}}">\n    <div class="list-thumb\n      {{^thumbnail}}list-thumb-none list-thumb-x{{/thumbnail}}\n      {{#thumbnail.isLandscape}}list-thumb-y{{/thumbnail.isLandscape}}\n      {{^thumbnail.isLandscape}}list-thumb-x{{/thumbnail.isLandscape}}"\n      {{#thumbnail}}data-style="background-image: url( {{thumbnail.source}} )"{{/thumbnail}}></div>\n    <h3>{{{displayTitle}}}</h3>\n    {{#wikidataDescription}}\n    <div class="wikidata-description">{{wikidataDescription}}</div>\n    {{/wikidataDescription}}\n    {{#lastModified}}\n    <div class="info">{{lastModified}}</div>\n    {{/lastModified}}\n    {{#proximity}}\n    <div class="info proximity">{{proximity}}</div>\n    {{/proximity}}\n  </a>\n</li>\n\t')}}),e.exports=o},"./src/mobile.startup/ScrollEndEventEmitter.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/mfExtend.js");function s(e,t){this.threshold=t||100,this.eventBus=e,this.enable(),OO.EventEmitter.call(this)}OO.mixinClass(s,OO.EventEmitter),s.EVENT_SCROLL_END="ScrollEndEventEmitter-scrollEnd",r(s,{_bindScroll:function(){this._scrollHandler||(this._scrollHandler=this._onScroll.bind(this),this.eventBus.on("scroll:throttled",this._scrollHandler))},_unbindScroll:function(){this._scrollHandler&&(this.eventBus.off("scroll:throttled",this._scrollHandler),this._scrollHandler=null)},_onScroll:function(){this.$el&&this.enabled&&this.scrollNearEnd()&&(this.disable(),this.emit(s.EVENT_SCROLL_END))},scrollNearEnd:function(){var e=i.getWindow(),t=e.scrollTop()+e.height(),n=this.$el.offset().top+this.$el.outerHeight();return t+this.threshold>n},enable:function(){this.enabled=!0,this._bindScroll()},disable:function(){this.enabled=!1,this._unbindScroll()},setElement:function(e){this.$el=e}}),e.exports=s},"./src/mobile.startup/Section.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/mfExtend.js"),s=n("./src/mobile.startup/View.js");function a(e){var t=this;e.tag="h"+e.level,this.line=e.line,this.text=e.text,this.hasReferences=e.hasReferences||!1,this.id=e.id||null,this.anchor=e.anchor,this.subsections=[],(e.subsections||[]).forEach((function(e){t.subsections.push(new a(e))})),s.call(this,e)}r(a,s,{template:i.template('\n<h{{level}} id="{{anchor}}">{{{line}}}</h{{level}}>\n{{{text}}}\n\t'),defaults:{line:void 0,text:""}}),e.exports=a},"./src/mobile.startup/Skin.js":function(e,t,n){var i,r=n("./src/mobile.startup/Browser.js").getSingleton(),s=n("./src/mobile.startup/View.js"),a=n("./src/mobile.startup/util.js"),o=n("./src/mobile.startup/currentPage.js"),l=n("./src/mobile.startup/eventBusSingleton.js");function c(e){var t=a.extend({},e);this.page=t.page,this.name=t.name,this.eventBus=t.eventBus,t.isBorderBox=!1,s.call(this,t)}n("./src/mobile.startup/mfExtend.js")(c,s,{defaults:{page:void 0},postRender:function(){var e=this,t=this.$el;r.supportsTouchEvents()&&t.addClass("touch-events"),this.$el.find("#mw-mf-page-center").on("click",(function(t){e.emit("click",t)}))},getLicenseMsg:function(){var e,t=mw.config.get("wgMFLicense"),n=mw.language.convertNumber(t.plural);return t.link&&(e=this.$el.find("#footer-places-terms-use").length>0?mw.msg("mobile-frontend-editor-licensing-with-terms",mw.message("mobile-frontend-editor-terms-link",this.$el.find("#footer-places-terms-use a").attr("href")).parse(),t.link,n):mw.msg("mobile-frontend-editor-licensing",t.link,n)),e}}),c.getSingleton=function(){return i||(i=new c({el:"body",page:o(),eventBus:l})),i},e.exports=c},"./src/mobile.startup/Thumbnail.js":function(e,t,n){var i=n("./src/mobile.startup/mfExtend.js"),r=n("./src/mobile.startup/util.js"),s=n("./src/mobile.startup/View.js");function a(e){s.call(this,r.extend({isBorderBox:!1},e))}i(a,s,{defaults:{filename:void 0},postRender:function(){this.options.description=this.$el.siblings(".thumbcaption").text()},getDescription:function(){return this.options.description},getFileName:function(){return this.options.filename}}),e.exports=a},"./src/mobile.startup/Toggler.js":function(e,t,n){var i=n("./src/mobile.startup/Browser.js").getSingleton(),r=n("./src/mobile.startup/util.js"),s=r.escapeHash,a={name:"expand",isSmall:!0,additionalClassNames:"indicator mw-ui-icon-flush-left"},o=n("./src/mobile.startup/Icon.js");function l(e){this.eventBus=e.eventBus,this._enable(e.$container,e.prefix,e.page,e.isClosed)}function c(e){var t=JSON.parse(mw.storage.session.get("expandedSections")||"{}");return t[e.title]=t[e.title]||{},t}function u(e){mw.storage.get("expandedSections")&&(mw.storage.session.set("expandedSections",JSON.stringify(mw.storage.get("expandedSections"))),mw.storage.remove("expandedSections")),mw.storage.session.set("expandedSections",JSON.stringify(e))}function d(e,t,n){var i,r,s=c(n);t.find(".section-heading span").each((function(){r=t.find(this),i=r.parents(".section-heading"),s[n.title][r.attr("id")]&&!i.hasClass("open-block")&&e.toggle(i,n)}))}function p(e){var t=(new Date).getTime(),n=c(e);Object.keys(n).forEach((function(e){var i=n[e];Object.keys(i).forEach((function(r){var s=i[r];Math.floor((t-s)/1e3/60/60/24)>=1&&delete n[e][r]}))})),u(n)}l.prototype.toggle=function(e,t){var n,r=this,s=e.is(".open-block"),l=e.find(".mw-headline"),d=e.next();e.toggleClass("open-block"),e.data("indicator").remove(),a.rotation=s?0:180,n=new o(a).prependTo(e),e.data("indicator",n),l.attr("aria-expanded",!s),d.toggleClass("open-block"),mw.requestIdleCallback((function(){r.eventBus.emit("section-toggled",{expanded:s,isReferenceSection:Boolean(d.attr("data-is-reference-section")),$heading:e})})),i.isWideScreen()||function(e,t){var n=e.find("span").attr("id"),i=e.hasClass("open-block"),r=c(t);n&&r[t.title]&&(i?r[t.title][n]=(new Date).getTime():delete r[t.title][n],u(r))}(e,t)},l.prototype.reveal=function(e,t,n){var i,r;try{(r=(i=t.find(s(e))).parents(".collapsible-heading")).length||(r=i.parents(".collapsible-block").prev(".collapsible-heading")),r.length&&!r.hasClass("open-block")&&this.toggle(r,n),r.length&&window.scrollTo(0,i.offset().top)}catch(e){}},l.prototype._enable=function(e,t,n,s){var l,c,u,h,f,m,g,b=this,v=mw.config.get("wgMFCollapseSectionsByDefault");function w(){var t,i=window.location.hash;if(0===i.indexOf("#"))try{t=decodeURIComponent(i),b.reveal(t,e,n)}catch(e){}}l=e.find("> h1,> h2,> h3,> h4,> h5,> h6,.section-heading").eq(0).prop("tagName")||"H1",void 0===v&&(v=!0),c=!v||"true"===mw.storage.get("expandSections"),e.children(l).each((function(r){var l,d=e.find(this),p=d.find(".mw-headline"),f=d.find(".indicator"),m=t+"collapsible-block-"+r;d.next().is("section")&&(h=d.next("section"),l=Boolean(h.attr("data-is-reference-section")),d.addClass("collapsible-heading ").data("section-number",r).on("click",(function(e){e.target.href||(e.preventDefault(),b.toggle(d,n))})),p.attr({tabindex:0,role:"button","aria-controls":m,"aria-expanded":"false"}),a.rotation=c?180:0,u=new o(a),f.length?f.replaceWith(u.$el):u.prependTo(d),d.data("indicator",u.$el),h.addClass("collapsible-block").eq(0).attr({id:m}),function(e,t,n){t.on("keypress",(function(i){13!==i.which&&32!==i.which||e.toggle(t,n)})).find("a").on("keypress mouseup",(function(e){e.stopPropagation()}))}(b,d,n),!l&&(!s&&i.isWideScreen()||c)&&b.toggle(d,n))})),m=mw.config.get("wgInternalRedirectTargetUrl"),(g=!!m&&m.split("#")[1])&&(window.location.hash=g,b.reveal(g,e,n)),w(),(f=e.find("a:not(.reference a)")).on("click",(function(){void 0!==f.attr("href")&&f.attr("href").indexOf("#")>-1&&w()})),r.getWindow().on("hashchange",(function(){w()})),!i.isWideScreen()&&n&&(d(this,e,n),p(n))},l._getExpandedSections=c,l._expandStoredSections=d,l._cleanObsoleteStoredSections=p,e.exports=l},"./src/mobile.startup/View.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/mfExtend.js"),s=/^(\S+)\s*(.*)$/,a=0;function o(){this.initialize.apply(this,arguments)}OO.mixinClass(o,OO.EventEmitter),r(o,{tagName:"div",isTemplateMode:!1,template:void 0,templatePartials:{},defaults:{},initialize:function(e){var t,n,r=this;OO.EventEmitter.call(this),e=i.extend({},this.defaults,e),this.options=e,this.cid=(t="view",n=(++a).toString(),t?t+n:n),"string"==typeof this.template&&(this.template=mw.template.compile(this.template)),e.el?this.$el=$(e.el):this.$el=this.parseHTML("<"+this.tagName+">"),this.$el.length?this._postInitialize(e):i.docReady((function(){r.$el=$(e.el),r._postInitialize(e)}))},_postInitialize:function(e){this.$el.addClass(e.className),!1!==e.isBorderBox&&this.$el.addClass("view-border-box"),this.render({})},preRender:function(){},postRender:function(){},render:function(e){var t,n;return i.extend(this.options,e),this.preRender(),this.undelegateEvents(),this.template&&!this.options.skipTemplateRender&&(n=this.template.render(this.options,this.templatePartials),this.isTemplateMode?(t=$(n),this.$el.replaceWith(t),this.$el=t):this.$el.html(n)),this.postRender(),this.delegateEvents(),this},delegateEvents:function(e){var t,n,i;if(e=e||this.options.events)for(n in this.undelegateEvents(),e)"function"!=typeof(i=e[n])&&(i=this[e[n]]),i&&(t=n.match(s),this.delegate(t[1],t[2],i.bind(this)))},delegate:function(e,t,n){this.$el.on(e+".delegateEvents"+this.cid,t,n)},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid)},undelegate:function(e,t,n){this.$el.off(e+".delegateEvents"+this.cid,t,n)},parseHTML:function(e){return i.parseHTML(e,document)}}),["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach((function(e){o.prototype[e]=function(){return this.$el[e].apply(this.$el,arguments),this}})),o.make=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new o(e);return t.forEach((function(e){n.append(e)})),n},e.exports=o},"./src/mobile.startup/actionParams.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r={action:"query",formatversion:2};e.exports=function(e){var t=mw.config.get("wgMFContentProviderScriptPath");return i.extend({},r,{origin:t?"*":void 0},e)}},"./src/mobile.startup/amcOutreach/AmcEnableForm.js":function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n("./src/mobile.startup/Button.js"),d=n("./src/mobile.startup/util.js"),p=function(e){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,i,l=o(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"isTemplateMode",get:function(){return!0}},{key:"template",get:function(){return d.template('\n<form class="amc-enable-form" action="{{postUrl}}" method="POST">\n\t{{#fields}}\n\t\t<input type="hidden" name="{{name}}" value="{{value}}">\n\t{{/fields}}\n</form>\n\t\t')}},{key:"postRender",value:function(){this.$el.append(new u({tagName:"button",progressive:!0,label:this.options.buttonLabel}).$el)}}])&&s(t.prototype,n),i&&s(t,i),c}(n("./src/mobile.startup/View.js"));e.exports=p},"./src/mobile.startup/amcOutreach/amcOutreach.js":function(e,t,n){var i,r=n("./src/mobile.startup/showOnPageReload.js"),s=n("./src/mobile.startup/promoCampaign/promoCampaign.js"),a=n("./src/mobile.startup/amcOutreach/amcOutreachDrawer.js"),o={onDesktopLink:"onDesktopLink",onHistoryLink:"onHistoryLink",onTalkLink:"onTalkLink"};e.exports={loadCampaign:function(){return i||(i=s((function(e,t,n,s){return a(e,i,mw.message,mw.util,r,mw.user.tokens.get("csrfToken"),t,n,s)}),o,"amc-outreach",!!mw.config.get("wgMFAmcOutreachActive"),!!mw.config.get("wgMFAmcOutreachUserEligible"),mw.storage))},ACTIONS:o}},"./src/mobile.startup/amcOutreach/amcOutreachDrawer.js":function(e,t,n){var i=n("./src/mobile.startup/Drawer.js"),r=n("./src/mobile.startup/Anchor.js"),s=n("./src/mobile.startup/util.js"),a=n("./src/mobile.startup/amcOutreach/AmcEnableForm.js");e.exports=function(e,t,n,o,l,c,u,d,p){return new i({className:"amc-outreach-drawer",children:[s.parseHTML("<div>").addClass("amc-outreach-image"),s.parseHTML("<p>").append(s.parseHTML("<strong>").text(n("mobile-frontend-amc-outreach-intro").text())),s.parseHTML("<p>").text(n("mobile-frontend-amc-outreach-description").text()),new a({postUrl:o.getUrl("Special:MobileOptions",{returnto:d,returntoquery:p||""}),fields:[{name:"updateSingleOption",value:"enableAMC"},{name:"enableAMC",value:"1"},{name:"token",value:c}],buttonLabel:n("mobile-frontend-amc-outreach-enable").text(),events:{submit:function(){t.makeActionIneligible(e),l.showOnPageReload(n("mobile-frontend-amc-outreach-enabled-message").text())}}}).$el,new r({href:"#",additionalClassNames:"cancel",progressive:!0,label:n("mobile-frontend-amc-outreach-no-thanks").text()}).$el],onBeforeHide:function(){t.makeActionIneligible(e),u()}})}},"./src/mobile.startup/currentPage.js":function(e,t,n){var i,r=n("./src/mobile.startup/Page.js"),s=n("./src/mobile.startup/PageGateway.js");e.exports=function(){if(i)return i;var e=mw.config.get("wgRestrictionEdit",[]),t=$("#content #bodyContent"),n=new s(new mw.Api),a=mw.Title.newFromText(mw.config.get("wgRelevantPageName")),o=mw.Title.newFromText(mw.config.get("wgPageName"));return 0===e.length&&e.push("*"),i=new r({title:o.getPrefixedText(),titleObj:o,relevantTitle:a.getPrefixedText(),protection:{edit:e},revId:mw.config.get("wgRevisionId"),isMainPage:mw.config.get("wgIsMainPage"),isWatched:$("#ca-watch").hasClass("watched"),sections:n.getSectionsFromHTML(t),isMissing:0===mw.config.get("wgArticleId"),id:mw.config.get("wgArticleId"),namespaceNumber:mw.config.get("wgNamespaceNumber")})}},"./src/mobile.startup/currentPageHTMLParser.js":function(e,t,n){var i,r=n("./src/mobile.startup/PageHTMLParser.js");e.exports=function(){return i||(i=new r($("#content #bodyContent")))}},"./src/mobile.startup/eventBusSingleton.js":function(e,t){e.exports=new OO.EventEmitter},"./src/mobile.startup/extendSearchParams.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/actionParams.js");e.exports=function(e){var t,n,s=mw.config.get("wgMFDisplayWikibaseDescriptions")||{search:!0,nearby:!0,watchlist:!0,tagline:!1},a=mw.config.get("wgMFContentProviderScriptPath");if(!Object.prototype.hasOwnProperty.call(s,e))throw new Error('"'+e+"\" isn't a feature that shows Wikibase descriptions.");return(t=Array.prototype.slice.call(arguments,1)).unshift({prop:[]}),t.push(mw.config.get("wgMFSearchAPIParams")),(n=i.extend.apply({},t)).prop=n.prop.concat(mw.config.get("wgMFQueryPropModules")),s[e]&&-1===n.prop.indexOf("description")&&n.prop.push("description"),a&&(n.origin="*"),r(n)}},"./src/mobile.startup/headers.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/Button.js"),s=n("./src/mobile.startup/icons.js");function a(e,t,n,r){var a="string"==typeof e?e:void 0,o={hasActions:t&&t.length,isHidden:!1,heading:a},l=i.template('\n<div class="overlay-header header '.concat(r||"",' hideable">\n\t<ul class="header-cancel">\n\t\t<li></li>\n\t</ul>\n\t{{{heading}}}\n\t{{#hasActions}}\n\t<div class="header-action"></div>\n\t{{/hasActions}}\n</div>\n\t\t')).render(o);n=n||s.cancel();var c=i.parseHTML(l);return c.find("h2 span").addClass("truncated-text"),c.find(".header-cancel li").append(n.$el),void 0===a&&e.$el.insertAfter(c.find(".header-cancel")),t&&t.length&&c.find(".header-action").append(t.map((function(e){return e.$el}))),c[0]}function o(e,t,n,i){return a(e='<div class="overlay-title"><h2>'.concat(e,"</h2></div>"),t,n,i)}e.exports={savingHeader:function(e){return o(e,[s.spinner({additionalClassNames:"savespinner loading"})],s.cancel(),"saving-header hidden")},saveHeader:function(e,t){return o(e,[new r({tagName:"button",additionalClassNames:"save submit",disabled:!0,label:i.saveButtonMessage()})],s.back(),t)},formHeader:function(e,t,n,i){return a(e,t,n,i)},header:o}},"./src/mobile.startup/icons.js":function(e,t,n){var i=n("./src/mobile.startup/Icon.js"),r=n("./src/mobile.startup/util.js");e.exports={CANCEL_GLYPH:"close",Icon:i,back:function(){return new i({tagName:"button",name:"previous-base20",additionalClassNames:"back",label:mw.msg("mobile-frontend-overlay-close")})},cancel:function(e,t){var n=e?"".concat("close","-").concat(e):"".concat("close","-base20");return new this.Icon(r.extend({tagName:"button",name:n,additionalClassNames:"cancel",label:mw.msg("mobile-frontend-overlay-close")},t||{}))},spinner:function(e){return void 0===(e=e||{}).additionalClassNames&&(e.additionalClassNames="spinner loading"),new this.Icon(r.extend(e,{name:"spinner",label:mw.msg("mobile-frontend-loading-message")}))},error:function(){return new i({name:"alert-invert",additionalClassNames:"load-fail-msg-icon"})},watchIcon:function(e){return new this.Icon(r.extend(e,{name:"star-base20",glyphPrefix:"wikimedia",additionalClassNames:"watch-this-article"}))},watchedIcon:function(e){return new this.Icon(r.extend(e,{name:"unStar-progressive",glyphPrefix:"wikimedia",additionalClassNames:"watch-this-article watched"}))}}},"./src/mobile.startup/lazyImages/lazyImageLoader.js":function(e,t,n){var i=n("./src/mobile.startup/util.js");e.exports={placeholderClass:"lazy-image-placeholder",queryPlaceholders:function(e){return Array.prototype.slice.call(e.getElementsByClassName("lazy-image-placeholder"))},loadImages:function(t){return i.Promise.all(t.map((function(t){return e.exports.loadImage(t).promise})))},loadImage:function(e){var t=i.Deferred(),n=e.dataset.width||"0",r=e.dataset.height||"0",s=new Image(parseInt(n,10),parseInt(r,10));return s.className=e.dataset.class||"",s.alt=e.dataset.alt||"",s.useMap=e.dataset.usemap,s.style.cssText=e.style.cssText||"",s.addEventListener("load",(function(){s.classList.add("image-lazy-loaded"),e.parentNode&&e.parentNode.replaceChild(s,e),t.resolve("load")}),{once:!0}),s.addEventListener("error",(function(){t.resolve("error")}),{once:!0}),s.src=e.dataset.src||"",s.srcset=e.dataset.srcset||"",{promise:t,image:s}},test:{placeholderClass:"lazy-image-placeholder"}}},"./src/mobile.startup/mfExtend.js":function(e,t){e.exports=function(e,t,n){var i;for(i in n?OO.inheritClass(e,t):(OO.initClass(e),n=t),n)e.prototype[i]=n[i]}},"./src/mobile.startup/moduleLoader.js":function(e,t){function n(){this._register={}}n.prototype={require:function(e){var t,n,i=this._register;function r(){if(!Object.hasOwnProperty.call(i,e))throw new Error("MobileFrontend Module not found: "+e);return i[e]}n=e.split("/");try{return(t=mw.loader.require(n[0]))[n[1]]?t[n[1]]:r()}catch(e){return r()}},define:function(e,t){var n=this;if(Object.hasOwnProperty.call(this._register,e))throw new Error("Module already exists: "+e);return this._register[e]=t,{deprecate:function(i){n.deprecate(i,t,e)}}},deprecate:function(e,t,n){var i;n&&(i="Use "+n+" instead."),mw.log.deprecate(this._register,e,t,i)}},e.exports=n},"./src/mobile.startup/moduleLoaderSingleton.js":function(e,t,n){var i=n("./src/mobile.startup/moduleLoader.js");e.exports=new i},"./src/mobile.startup/page/pageJSONParser.js":function(e,t,n){var i=n("./src/mobile.startup/Page.js"),r=n("./src/mobile.startup/util.js");e.exports={parse:function(e){var t,n,s=e.thumbnail,a=e.pageprops||{displaytitle:mw.html.escape(e.title)},o=e.terms;return(a||o)&&(n=o&&o.label?mw.html.escape(o.label[0]):a.displaytitle),e.wikidataDescription=e.description||void 0,s&&(e.thumbnail.isLandscape=s.width>s.height),e.revisions&&e.revisions[0]&&(t=e.revisions[0],e.lastModified=new Date(t.timestamp)),new i(r.extend(e,{id:e.pageid,isMissing:!!e.missing,url:mw.util.getUrl(e.title),displayTitle:n}))}}},"./src/mobile.startup/promisedView.js":function(e,t,n){var i=n("./src/mobile.startup/icons.js"),r=n("./src/mobile.startup/View.js");e.exports=function(e){var t=new r({className:"promised-view"});return t.$el.append(i.spinner().$el),e.then((function(e){t.$el.replaceWith(e.$el),t.$el=e.$el}),(function(e){e&&e.$el&&(t.$el.replaceWith(e.$el),t.$el=e.$el)})),t}},"./src/mobile.startup/promoCampaign/promoCampaign.js":function(e,t){e.exports=function(e,t,n,i,r,s){var a,o,l={};for(a in t)o=t[a],l[o]="mobile-frontend-".concat(n,"-ineligible-").concat(o);function c(){return i}function u(e){if(!(e in t))throw new Error("Action '".concat(e,"' not found in 'actions' object. Please add this to\n\t\t\t\tthe object when creating a campaign with promoCampaign.js if you believe\n\t\t\t\tthis is a valid action."))}function d(e){return u(e),c()&&r&&null===s.get(l[e])}return{showIfEligible:function(t){if(!d(t))return null;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.apply(void 0,[t].concat(i))},makeActionIneligible:function(e){return u(e),s.set(l[e],"~")},makeAllActionsIneligible:function(){var e,n;for(e in t)n=t[e],this.makeActionIneligible(n)},isCampaignActive:c}}},"./src/mobile.startup/search/SearchGateway.js":function(e,t,n){var i=n("./src/mobile.startup/page/pageJSONParser.js"),r=n("./src/mobile.startup/util.js"),s=n("./src/mobile.startup/extendSearchParams.js");function a(e){this.api=e,this.searchCache={},this.generator=mw.config.get("wgMFSearchGenerator")}a.prototype={searchNamespace:0,getApiData:function(e){var t=this.generator.prefix,n=s("search",{generator:this.generator.name});return n.redirects="",n["g"+t+"search"]=e,n["g"+t+"namespace"]=this.searchNamespace,n["g"+t+"limit"]=15,n.pilimit&&(n.pilimit=15,n.pithumbsize=mw.config.get("wgMFThumbnailSizes").tiny),n},_createSearchRegEx:function(e){return e=e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),new RegExp("^("+e+")","ig")},_highlightSearchTerm:function(e,t){return e=r.parseHTML("<span>").text(e).html(),t=r.parseHTML("<span>").text(t).html(),e.replace(this._createSearchRegEx(t),"<strong>$1</strong>")},_getPage:function(e,t){var n=i.parse(t);return n.displayTitle=this._highlightSearchTerm(t.displaytext?t.displaytext:n.title,e),n.index=t.index,n},_processData:function(e,t){var n=this,i=[];return t.query&&(i=t.query.pages||{},(i=Object.keys(i).map((function(t){return n._getPage(e,i[t])}))).sort((function(e,t){return e.index<t.index?-1:1}))),i},search:function(e){var t,n,i=this;return this.isCached(e)||(n=(t=this.api.get(this.getApiData(e))).then((function(t){return{query:e,results:i._processData(e,t)}}),(function(){i.searchCache[e]=void 0})),this.searchCache[e]=n.promise({abort:function(){t.abort()}})),this.searchCache[e]},isCached:function(e){return Boolean(this.searchCache[e])}},e.exports=a},"./src/mobile.startup/showOnPageReload.js":function(e,t){var n="mobileFrontend/toast";mw.requestIdleCallback((function(){var e=mw.storage.get(n);e&&(e=JSON.parse(e),mw.notify(e.content,e.options),mw.storage.remove(n))})),e.exports={showOnPageReload:function(e,t){mw.storage.get(n)?mw.log.warn("A pending toast message already exits. The page should have been reloaded by now."):mw.storage.set(n,JSON.stringify({content:e,options:t}))}}},"./src/mobile.startup/util.js":function(e,t){e.exports={saveButtonMessage:function(){return mw.config.get("wgEditSubmitButtonLabelPublish")?mw.msg("mobile-frontend-editor-publish"):mw.msg("mobile-frontend-editor-save")},Promise:{all:function(e){return $.when.apply($,e)}},escapeSelector:function(e){return $.escapeSelector(e)},grep:function(){return $.grep.apply($,arguments)},docReady:function(e){return $(e)},Deferred:function(){return $.Deferred()},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(e,t){return t=t||document,$($.parseHTML(e,t))},isNumeric:function(){return $.isNumeric.apply($,arguments)},extend:function(){return $.extend.apply($,arguments)},escapeHash:function(e){return e.replace(/(:|\.)/g,"\\$1")},isModifiedEvent:function(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey},repeatEvent:function(e,t,n,i){return e.on(n,(function(e){return t.emit(n,e)}),i)},template:function(e){return{getSource:function(){return e},render:function(t,n){var i={};return Object.keys(n||{}).forEach((function(e){i[e]=n[e].getSource()})),Mustache.render(e.trim(),t,i)}}}}},"./src/mobile.startup/watchstar/WatchstarGateway.js":function(e,t,n){var i=n("./src/mobile.startup/util.js"),r=n("./src/mobile.startup/actionParams.js");function s(e){this.api=e}s.prototype={getStatuses:function(e,t){return i.Promise.all([this.getStatusesByID(e),this.getStatusesByTitle(t)]).then((function(){return i.extend.apply(i,arguments)}))},getStatusesByID:function(e){var t=this;return e.length?this.api.get({formatversion:2,action:"query",prop:"info",inprop:"watched",pageids:e}).then((function(e){return t._unmarshalGetResponse(e)})):i.Deferred().resolve({})},getStatusesByTitle:function(e){var t=this;return e.length?this.api.get(r({prop:"info",inprop:"watched",titles:e})).then((function(e){return t._unmarshalGetResponse(e)})):i.Deferred().resolve({})},postStatusesByTitle:function(e,t){var n={action:"watch",titles:e};return t||(n.unwatch=!t),this.api.postWithToken("watch",n)},_unmarshalGetResponse:function(e){return(e&&e.query&&e.query.pages||[]).reduce((function(e,t){return e[t.title]=t.watched,e}),{})}},e.exports=s},"./src/mobile.startup/watchstar/WatchstarPageList.js":function(e,t,n){var i=n("./src/mobile.startup/PageList.js"),r=n("./src/mobile.startup/watchstar/watchstar.js"),s=mw.user,a=n("./src/mobile.startup/util.js"),o=n("./src/mobile.startup/Page.js"),l=n("./src/mobile.startup/mfExtend.js"),c=n("./src/mobile.startup/watchstar/WatchstarGateway.js");function u(e){this.wsGateway=new c(e.api),i.apply(this,arguments)}l(u,i,{postRender:function(){var e,t,n=this,r=[],s=[];return i.prototype.postRender.apply(this),e=this.queryUnitializedItems(),t=this.parsePagesFromItems(e),Object.keys(t).forEach((function(e){var n=t[e];n&&"0"!==n?r.push(n):s.push(e)})),this.getPages(r,s).then((function(t){n.renderItems(e,t)}))},queryUnitializedItems:function(){return this.$el.find("li:not(.with-watchstar)")},getPages:function(e,t){return s.isAnon()?a.Deferred().resolve({}):this.wsGateway.getStatuses(e,t)},parsePagesFromItems:function(e){var t=this,n={};return e.each((function(e,i){var r=t.$el.find(i);n[r.attr("title")]=r.data("id")})),n},renderItems:function(e,t){var n=this;s.isAnon()||e.each((function(e,i){var r=n.$el.find(i),s=new o({sections:[],title:r.attr("title"),id:r.data("id")}),a=t[s.getTitle()];n._appendWatchstar(r,s,a),r.addClass("with-watchstar")}))},_appendWatchstar:function(e,t,n){r({isWatched:n,page:t}).appendTo(e)}}),e.exports=u},"./src/mobile.startup/watchstar/watchstar.js":function(e,t,n){var i=n("./src/mobile.startup/icons.js");e.exports=function(e){var t=e.isWatched,n=mw.loader.require("mediawiki.page.watch.ajax").watchstar,r=t?"unwatch":"watch",s={href:mw.Title.newFromText(e.page.title).getUrl({action:r})},a=i.watchIcon(s),o=i.watchedIcon(s),l=a.$el.attr("class"),c=o.$el.attr("class"),u=t?o:a;return n(u.$el,e.page.title,(function(e,t){e.attr("class",t?c:l)})),u}}}]);
//# sourceMappingURL=mobile.common.js.map.json